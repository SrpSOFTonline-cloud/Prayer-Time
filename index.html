<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prayer Time</title>

<style>
body{
 margin:0;
 font-family:Arial;
 background:#0b1120;
 color:white;
 padding-bottom:70px;
 transition:0.3s;
}

.light{
 background:#f1f5f9;
 color:black;
}

header{
 background:linear-gradient(120deg,#16a34a,#065f46);
 padding:15px;
 text-align:center;
}

.card{
 background:#1e293b;
 margin:12px;
 padding:15px;
 border-radius:12px;
}

.light .card{
 background:white;
}

.bottom-nav{
 position:fixed;
 bottom:0;
 width:100%;
 background:#1e293b;
 display:flex;
 justify-content:space-around;
 padding:10px;
}

.light .bottom-nav{
 background:white;
}

button{
 padding:10px;
 border:none;
 border-radius:8px;
 margin:3px;
}

.hidden{display:none}
</style>
</head>

<body>

<header>
<h2 id="title">ðŸ•Œ Prayer Time</h2>
<p id="hijri"></p>
</header>

<!-- Home -->
<div id="homePage">

<div class="card">
<h3 id="nextPrayer">Next Prayer</h3>
<p id="countdown"></p>
</div>

<div class="card">
<h3 id="todayTitle">à¦†à¦œà¦•à§‡à¦° à¦¨à¦¾à¦®à¦¾à¦œ à¦¸à¦®à§Ÿ</h3>
<p id="fajr"></p>
<p id="dhuhr"></p>
<p id="asr"></p>
<p id="maghrib"></p>
<p id="isha"></p>
</div>

<div class="card">
<h3 id="ramadanTitle">à¦¸à§‡à¦¹à¦°à¦¿ à¦“ à¦‡à¦«à¦¤à¦¾à¦°</h3>
<p id="sehri"></p>
<p id="iftar"></p>
</div>

</div>

<!-- Settings -->
<div id="settingsPage" class="hidden">

<div class="card">
<h3>Language</h3>
<button onclick="setLang('bn')">à¦¬à¦¾à¦‚à¦²à¦¾</button>
<button onclick="setLang('en')">English</button>
</div>

<div class="card">
<h3>Mode</h3>
<button onclick="toggleMode()">Dark / Light</button>
</div>

<div class="card">
<h3>Developer</h3>
<p>Shovon</p>
<p>01843860547</p>
<p>srp-soft.ltd</p>
</div>

</div>

<!-- Bottom Nav -->
<div class="bottom-nav">
<button onclick="showPage('home')">Home</button>
<button onclick="showPage('settings')">Settings</button>
</div>

<audio id="adhan" src="https://cdn.islamic.network/audio/adhan/adhan.mp3"></audio>

<script>

/* Page Switch */
function showPage(p){
homePage.classList.add("hidden");
settingsPage.classList.add("hidden");

if(p==="home") homePage.classList.remove("hidden");
if(p==="settings") settingsPage.classList.remove("hidden");
}

/* AM PM Format */
function formatTime(time24){
 let [h,m]=time24.split(":");
 let ampm = h >= 12 ? "PM" : "AM";
 h = h % 12 || 12;
 return h + ":" + m + " " + ampm;
}

/* Language Change */
function setLang(lang){

localStorage.setItem("lang",lang);

if(lang==="en"){
todayTitle.innerText="Today's Prayer Time";
ramadanTitle.innerText="Sehri & Iftar";
nextPrayer.innerText="Next Prayer";
}
else{
todayTitle.innerText="à¦†à¦œà¦•à§‡à¦° à¦¨à¦¾à¦®à¦¾à¦œ à¦¸à¦®à§Ÿ";
ramadanTitle.innerText="à¦¸à§‡à¦¹à¦°à¦¿ à¦“ à¦‡à¦«à¦¤à¦¾à¦°";
nextPrayer.innerText="à¦ªà¦°à¦¬à¦°à§à¦¤à§€ à¦¨à¦¾à¦®à¦¾à¦œ";
}

}

/* Dark Light */
function toggleMode(){
document.body.classList.toggle("light");
}

/* Prayer API */
async function loadPrayer(){

let res=await fetch("https://api.aladhan.com/v1/timingsByCity?city=Dhaka&country=Bangladesh&method=1");
let data=await res.json();

let t=data.data.timings;

fajr.innerText="Fajr: "+formatTime(t.Fajr);
dhuhr.innerText="Dhuhr: "+formatTime(t.Dhuhr);
asr.innerText="Asr: "+formatTime(t.Asr);
maghrib.innerText="Maghrib: "+formatTime(t.Maghrib);
isha.innerText="Isha: "+formatTime(t.Isha);

sehri.innerText="Sehri End: "+formatTime(t.Fajr);
iftar.innerText="Iftar: "+formatTime(t.Maghrib);

hijri.innerText="Hijri: "+data.data.date.hijri.date;

nextPrayerCountdown(t);
}

/* Countdown */
function nextPrayerCountdown(t){

let prayerList=[
{n:"Fajr",t:t.Fajr},
{n:"Dhuhr",t:t.Dhuhr},
{n:"Asr",t:t.Asr},
{n:"Maghrib",t:t.Maghrib},
{n:"Isha",t:t.Isha}
];

setInterval(()=>{

let now=new Date();

for(let p of prayerList){

let time=p.t.split(":");
let pt=new Date();
pt.setHours(time[0],time[1],0);

if(pt>now){

let diff=pt-now;

let h=Math.floor(diff/3600000);
let m=Math.floor(diff/60000)%60;
let s=Math.floor(diff/1000)%60;

countdown.innerText=h+"h "+m+"m "+s+"s";
nextPrayer.innerText="Next Prayer: "+p.n;

if(diff<60000){
adhan.play();
}

break;
}

}

},1000);

}

loadPrayer();

/* Load saved language */
let savedLang=localStorage.getItem("lang");
if(savedLang) setLang(savedLang);

</script>

</body>
</html>
