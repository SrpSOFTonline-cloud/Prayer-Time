<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Prayer Time</title>

<style>
body{
 margin:0;
 font-family:Arial;
 background:#0b1120;
 color:white;
 padding-bottom:70px;
}

/* Splash */
#splash{
 position:fixed;
 width:100%;
 height:100%;
 background:#0b1120;
 display:flex;
 flex-direction:column;
 justify-content:center;
 align-items:center;
 z-index:999;
}

.logo{
 width:120px;
}

/* Header */
header{
 background:linear-gradient(120deg,#16a34a,#065f46);
 padding:15px;
 text-align:center;
}

/* Card */
.card{
 background:#1e293b;
 margin:12px;
 padding:15px;
 border-radius:12px;
}

/* Bottom Nav */
.bottom-nav{
 position:fixed;
 bottom:0;
 width:100%;
 background:#1e293b;
 display:flex;
 justify-content:space-around;
 padding:10px;
}

button{
 padding:10px;
 border:none;
 border-radius:8px;
}

.hidden{display:none}
</style>

</head>

<body>

<!-- Splash -->
<div id="splash">
<img src="logo.png" class="logo">
<h2>Prayer Time</h2>
<p>srp-soft.ltd</p>
</div>

<header>
<h2 id="title">ðŸ•Œ Prayer Time</h2>
<p id="hijri"></p>
</header>

<!-- Home -->
<div id="homePage">

<div class="card">
<h3 id="nextPrayer">Next Prayer</h3>
<p id="countdown"></p>
</div>

<div class="card">
<h3>à¦†à¦œà¦•à§‡à¦° à¦¨à¦¾à¦®à¦¾à¦œ à¦¸à¦®à§Ÿ</h3>
<p id="fajr"></p>
<p id="dhuhr"></p>
<p id="asr"></p>
<p id="maghrib"></p>
<p id="isha"></p>
</div>

<div class="card">
<h3>à¦¸à§‡à¦¹à¦°à¦¿ à¦“ à¦‡à¦«à¦¤à¦¾à¦°</h3>
<p id="sehri"></p>
<p id="iftar"></p>
</div>

</div>

<!-- Settings -->
<div id="settingsPage" class="hidden">

<div class="card">
<h3>Language</h3>
<button onclick="setLang('bn')">à¦¬à¦¾à¦‚à¦²à¦¾</button>
<button onclick="setLang('en')">English</button>
</div>

<div class="card">
<h3>Developer</h3>
<p>Shovon</p>
<p>01843860547</p>
<p>srp-soft.ltd</p>
</div>

</div>

<!-- Bottom Nav -->
<div class="bottom-nav">
<button onclick="showPage('home')">Home</button>
<button onclick="showPage('settings')">Settings</button>
</div>

<!-- Adhan -->
<audio id="adhan" src="https://cdn.islamic.network/audio/adhan/adhan.mp3"></audio>

<script>

/* Splash Hide */
setTimeout(()=>{
document.getElementById("splash").style.display="none";
},2500);

/* Page Switch */
function showPage(p){
homePage.classList.add("hidden");
settingsPage.classList.add("hidden");

if(p=="home") homePage.classList.remove("hidden");
if(p=="settings") settingsPage.classList.remove("hidden");
}

/* Language */
function setLang(lang){
localStorage.setItem("lang",lang);
alert("Language Changed");
}

/* Prayer API */
async function loadPrayer(){

let res=await fetch("https://api.aladhan.com/v1/timingsByCity?city=Dhaka&country=Bangladesh&method=1");
let data=await res.json();

let t=data.data.timings;

fajr.innerText="à¦«à¦œà¦°: "+t.Fajr;
dhuhr.innerText="à¦¯à§‹à¦¹à¦°: "+t.Dhuhr;
asr.innerText="à¦†à¦¸à¦°: "+t.Asr;
maghrib.innerText="à¦®à¦¾à¦—à¦°à¦¿à¦¬: "+t.Maghrib;
isha.innerText="à¦à¦¶à¦¾: "+t.Isha;

sehri.innerText="à¦¸à§‡à¦¹à¦°à¦¿ à¦¶à§‡à¦·: "+t.Fajr;
iftar.innerText="à¦‡à¦«à¦¤à¦¾à¦°: "+t.Maghrib;

hijri.innerText="à¦¹à¦¿à¦œà¦°à¦¿: "+data.data.date.hijri.date;

nextPrayerCountdown(t);
}

/* Countdown */
function nextPrayerCountdown(t){

let prayerList=[
{n:"Fajr",t:t.Fajr},
{n:"Dhuhr",t:t.Dhuhr},
{n:"Asr",t:t.Asr},
{n:"Maghrib",t:t.Maghrib},
{n:"Isha",t:t.Isha}
];

setInterval(()=>{

let now=new Date();

for(let p of prayerList){

let time=p.t.split(":");
let pt=new Date();
pt.setHours(time[0],time[1],0);

if(pt>now){

let diff=pt-now;

let h=Math.floor(diff/3600000);
let m=Math.floor(diff/60000)%60;
let s=Math.floor(diff/1000)%60;

countdown.innerText=p.n+" in "+h+"h "+m+"m "+s+"s";
nextPrayer.innerText="Next Prayer: "+p.n;

if(diff<60000){
document.getElementById("adhan").play();
}

break;
}

}

},1000);

}

/* Offline Save */
function saveOffline(data){
localStorage.setItem("prayer",JSON.stringify(data));
}

loadPrayer();

</script>

</body>
</html>

