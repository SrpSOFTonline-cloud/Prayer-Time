<!DOCTYPE html>
<html>
<head>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prayer Times Bangladesh</title>

<style>

/* ANDROID APP STYLE */
body{
margin:0;
font-family:Segoe UI;
background:#0f172a;
color:white;
}

/* Splash */
#splash{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:#0f172a;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
z-index:9999;
}

/* Header */
.header{
text-align:center;
padding:15px;
background:#1e293b;
font-size:20px;
}

/* Card */
.card{
background:#1e293b;
margin:12px;
padding:15px;
border-radius:15px;
}

/* Prayer Row */
.prayer-row{
display:flex;
overflow:auto;
}

.prayer{
min-width:120px;
background:#334155;
margin:6px;
border-radius:12px;
padding:15px;
text-align:center;
}

.active{
background:#22c55e;
}

/* Bottom Nav */
.bottom-nav{
position:fixed;
bottom:0;
width:100%;
background:#1e293b;
display:flex;
justify-content:space-around;
padding:12px;
}

button{
background:#334155;
color:white;
border:none;
padding:10px;
border-radius:10px;
}

.hidden{display:none}

</style>
</head>

<body>

<!-- SPLASH SCREEN -->
<div id="splash">
<h1>ðŸ•Œ Prayer Times Bangladesh</h1>
<p>SRP SOFT LTD</p>
</div>

<!-- HEADER -->
<div class="header">
Prayer Times Bangladesh
<p id="localTime"></p>
</div>

<!-- HOME -->
<div id="homePage">

<div class="card">
<h3 id="nextName"></h3>
<h1 id="remaining"></h1>
</div>

<div class="card prayer-row">

<div class="prayer" id="pFajr"><p id="fajrTime"></p>Fajr</div>
<div class="prayer" id="pDhuhr"><p id="dhuhrTime"></p>Dhuhr</div>
<div class="prayer" id="pAsr"><p id="asrTime"></p>Asr</div>
<div class="prayer" id="pMaghrib"><p id="maghribTime"></p>Maghrib</div>
<div class="prayer" id="pIsha"><p id="ishaTime"></p>Isha</div>

</div>

</div>

<!-- TASBIH -->
<div id="tasbihPage" class="hidden">
<div class="card">
<h2>Tasbih</h2>
<h1 id="tasbihCount">0</h1>
<button onclick="addTasbih()">Count</button>
<button onclick="resetTasbih()">Reset</button>
</div>
</div>

<!-- PRIVACY POLICY -->
<div id="privacyPage" class="hidden">
<div class="card">

<h2>Privacy Policy</h2>

<p>This app collects location for prayer time & mosque finder.</p>
<p>Notification permission used for azan alerts.</p>
<p>We do not sell user data.</p>

<p>Contact:</p>
<p>support@srpsoft.com</p>

</div>
</div>

<!-- SETTINGS -->
<div id="settingsPage" class="hidden">

<div class="card">
<h3>Developer</h3>
<p>Shovon</p>
<p>SRP SOFT LTD</p>
<p>+8809696060547</p>
</div>

<button onclick="showPage('privacy')">Privacy Policy</button>

</div>

<!-- NAV -->
<div class="bottom-nav">
<button onclick="showPage('home')">Home</button>
<button onclick="showPage('tasbih')">Tasbih</button>
<button onclick="showPage('settings')">Settings</button>
</div>

<script>

/* SPLASH */
setTimeout(()=>{
splash.style.display="none";
},2000);

/* PAGE SWITCH */
function showPage(p){
homePage.classList.add("hidden");
tasbihPage.classList.add("hidden");
settingsPage.classList.add("hidden");
privacyPage.classList.add("hidden");

if(p==="home") homePage.classList.remove("hidden");
if(p==="tasbih") tasbihPage.classList.remove("hidden");
if(p==="settings") settingsPage.classList.remove("hidden");
if(p==="privacy") privacyPage.classList.remove("hidden");
}

/* LOCAL TIME */
setInterval(()=>{
localTime.innerText=new Date().toLocaleTimeString();
},1000);

/* PRAYER API */
async function loadPrayer(){

let res=await fetch("https://api.aladhan.com/v1/timingsByCity?city=Dhaka&country=Bangladesh&method=1");
let data=await res.json();

let t=data.data.timings;

fajrTime.innerText=t.Fajr;
dhuhrTime.innerText=t.Dhuhr;
asrTime.innerText=t.Asr;
maghribTime.innerText=t.Maghrib;
ishaTime.innerText=t.Isha;

nextPrayer(t);
}

/* NEXT PRAYER */
function nextPrayer(t){

let list=[
{name:"Fajr",time:t.Fajr,id:"pFajr"},
{name:"Dhuhr",time:t.Dhuhr,id:"pDhuhr"},
{name:"Asr",time:t.Asr,id:"pAsr"},
{name:"Maghrib",time:t.Maghrib,id:"pMaghrib"},
{name:"Isha",time:t.Isha,id:"pIsha"}
];

setInterval(()=>{

let now=new Date();

for(let p of list){

let [h,m]=p.time.split(":");
let pt=new Date();
pt.setHours(h,m,0);

if(pt>now){

let diff=pt-now;

remaining.innerText=
Math.floor(diff/3600000)+":"+
Math.floor(diff/60000)%60+":"+
Math.floor(diff/1000)%60;

nextName.innerText="Next Prayer "+p.name;

break;
}

}

},1000);

}

/* TASBIH SAVE */
let count=localStorage.getItem("tasbih")||0;
tasbihCount.innerText=count;

function addTasbih(){
count++;
tasbihCount.innerText=count;
localStorage.setItem("tasbih",count);
}

function resetTasbih(){
count=0;
tasbihCount.innerText=0;
localStorage.setItem("tasbih",0);
}

loadPrayer();

</script>

</body>
</html>
