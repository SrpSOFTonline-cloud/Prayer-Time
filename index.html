<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prayer Times Bangladesh</title>

<style>

body{
margin:0;
font-family:Segoe UI;
background:#f3f4f6;
transition:.3s;
}

.dark{
background:#0f172a;
color:white;
}

.header{
text-align:center;
padding:15px;
font-size:20px;
background:#e5e7eb;
}

.dark .header{
background:#1e293b;
}

.card{
background:white;
margin:12px;
padding:15px;
border-radius:12px;
}

.dark .card{
background:#1e293b;
}

.prayer-row{
display:flex;
overflow:auto;
}

.prayer{
min-width:120px;
background:#e5e7eb;
margin:6px;
border-radius:10px;
padding:15px;
text-align:center;
}

.active{
background:#cde4b7;
}

.bottom-nav{
position:fixed;
bottom:0;
width:100%;
background:white;
display:flex;
justify-content:space-around;
padding:10px;
}

.dark .bottom-nav{
background:#1e293b;
}

button{
padding:10px;
border:none;
border-radius:8px;
margin:4px;
}

.hidden{display:none}

</style>
</head>

<body>

<div class="header">
ðŸ•Œ Prayer Times Bangladesh
<p id="dateText"></p>
<p id="localTime"></p>
</div>

<!-- HOME -->
<div id="homePage">

<div class="card">
<h3 id="nextName"></h3>
<h1 id="remaining"></h1>
</div>

<div class="card prayer-row">

<div class="prayer" id="pFajr"><p id="fajrTime"></p>Fajr</div>
<div class="prayer" id="pDhuhr"><p id="dhuhrTime"></p>Dhuhr</div>
<div class="prayer" id="pAsr"><p id="asrTime"></p>Asr</div>
<div class="prayer" id="pMaghrib"><p id="maghribTime"></p>Maghrib</div>
<div class="prayer" id="pIsha"><p id="ishaTime"></p>Isha</div>

</div>
</div>

<!-- TASBIH -->
<div id="tasbihPage" class="hidden">
<div class="card">
<h2>Tasbih Counter</h2>
<h1 id="tasbihCount">0</h1>
<button onclick="addTasbih()">+</button>
<button onclick="resetTasbih()">Reset</button>
</div>
</div>

<!-- ZAKAT -->
<div id="zakatPage" class="hidden">
<div class="card">
<h2>Zakat Calculator</h2>
<input id="money" placeholder="Money"><br><br>
<input id="gold" placeholder="Gold Value"><br><br>
<button onclick="calcZakat()">Calculate</button>
<h3 id="zakatResult"></h3>
</div>
</div>

<!-- QIBLA -->
<div id="qiblaPage" class="hidden">
<div class="card">
<h2>Qibla Compass</h2>
<p id="qiblaDir">Move Phone</p>
</div>
</div>

<!-- SETTINGS -->
<div id="settingsPage" class="hidden">

<div class="card">
<h3>Mode</h3>
<button onclick="toggleMode()">Dark / Light</button>
</div>

<div class="card">
<h3>Language</h3>
<button onclick="setLang('en')">English</button>
<button onclick="setLang('bn')">à¦¬à¦¾à¦‚à¦²à¦¾</button>
</div>

<div class="card">
<h3>Developer</h3>
<p>Shovon</p>
<p>SRP SOFT LTD</p>
<p>ðŸ“ž +8809696060547</p>
<p>ðŸ“§ support@srpsoft.com</p>
</div>

</div>

<!-- NAV -->
<div class="bottom-nav">
<button onclick="showPage('home')">Home</button>
<button onclick="showPage('tasbih')">Tasbih</button>
<button onclick="showPage('zakat')">Zakat</button>
<button onclick="showPage('qibla')">Qibla</button>
<button onclick="showPage('settings')">Settings</button>
</div>

<script>

/* PAGE SWITCH */
function showPage(p){
homePage.classList.add("hidden");
tasbihPage.classList.add("hidden");
zakatPage.classList.add("hidden");
qiblaPage.classList.add("hidden");
settingsPage.classList.add("hidden");

if(p==="home") homePage.classList.remove("hidden");
if(p==="tasbih") tasbihPage.classList.remove("hidden");
if(p==="zakat") zakatPage.classList.remove("hidden");
if(p==="qibla") qiblaPage.classList.remove("hidden");
if(p==="settings") settingsPage.classList.remove("hidden");
}

/* DARK MODE */
function toggleMode(){
document.body.classList.toggle("dark");
}

/* LOCAL TIME */
setInterval(()=>{
localTime.innerText=new Date().toLocaleTimeString();
},1000);

/* PRAYER API */
async function loadPrayer(){

let res=await fetch("https://api.aladhan.com/v1/timingsByCity?city=Dhaka&country=Bangladesh&method=1");
let data=await res.json();

let t=data.data.timings;

fajrTime.innerText=t.Fajr;
dhuhrTime.innerText=t.Dhuhr;
asrTime.innerText=t.Asr;
maghribTime.innerText=t.Maghrib;
ishaTime.innerText=t.Isha;

dateText.innerText=
"Hijri "+data.data.date.hijri.date+
" | English "+data.data.date.gregorian.date;

nextPrayer(t);
}

/* COUNTDOWN */
function nextPrayer(t){

let list=[
{name:"Fajr",time:t.Fajr,id:"pFajr"},
{name:"Dhuhr",time:t.Dhuhr,id:"pDhuhr"},
{name:"Asr",time:t.Asr,id:"pAsr"},
{name:"Maghrib",time:t.Maghrib,id:"pMaghrib"},
{name:"Isha",time:t.Isha,id:"pIsha"}
];

setInterval(()=>{

let now=new Date();

document.querySelectorAll(".prayer")
.forEach(e=>e.classList.remove("active"));

for(let p of list){

let [h,m]=p.time.split(":");
let pt=new Date();
pt.setHours(h,m,0);

if(pt>now){

let diff=pt-now;

let hh=Math.floor(diff/3600000);
let mm=Math.floor(diff/60000)%60;
let ss=Math.floor(diff/1000)%60;

remaining.innerText=hh+":"+mm+":"+ss;
nextName.innerText="Next Prayer "+p.name;

document.getElementById(p.id).classList.add("active");

break;
}
}

},1000);
}

/* ZAKAT */
function calcZakat(){
let total=(+money.value||0)+(+gold.value||0);
zakatResult.innerText="Zakat = "+(total*0.025).toFixed(2);
}

/* TASBIH */
let count=localStorage.getItem("tasbih")||0;
tasbihCount.innerText=count;

function addTasbih(){
count++;
tasbihCount.innerText=count;
localStorage.setItem("tasbih",count);
}

function resetTasbih(){
count=0;
tasbihCount.innerText=count;
localStorage.setItem("tasbih",count);
}

/* SIMPLE QIBLA */
if(window.DeviceOrientationEvent){
window.addEventListener("deviceorientation",e=>{
qiblaDir.innerText="Direction: "+Math.round(e.alpha);
});
}

/* LANGUAGE */
function setLang(l){
alert("Demo Language Switch "+l);
}

loadPrayer();

</script>

</body>
</html>
