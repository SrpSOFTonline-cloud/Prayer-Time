<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prayer Time</title>

<style>

body{
 margin:0;
 font-family:'Segoe UI',sans-serif;
 background:#0f172a;
 color:white;
 padding-bottom:80px;
 transition:.3s;
}

.light{
 background:#f1f5f9;
 color:black;
}

/* Header */
header{
 background:linear-gradient(120deg,#22c55e,#15803d);
 padding:18px;
 text-align:center;
 border-bottom-left-radius:20px;
 border-bottom-right-radius:20px;
 box-shadow:0 4px 12px rgba(0,0,0,0.3);
}

/* Card */
.card{
 background:#1e293b;
 margin:15px;
 padding:18px;
 border-radius:16px;
 box-shadow:0 4px 12px rgba(0,0,0,0.3);
}

.light .card{
 background:white;
}

/* Time Text */
.big{
 font-size:28px;
 font-weight:bold;
 margin-top:8px;
}

/* Bottom Nav */
.bottom-nav{
 position:fixed;
 bottom:0;
 width:100%;
 background:#1e293b;
 display:flex;
 justify-content:space-around;
 padding:12px;
 border-top-left-radius:20px;
 border-top-right-radius:20px;
}

.light .bottom-nav{
 background:white;
}

.bottom-nav button{
 background:none;
 color:#22c55e;
 font-weight:bold;
}

button{
 padding:10px;
 border:none;
 border-radius:10px;
 margin:5px;
}

.hidden{display:none}

</style>
</head>

<body>

<header>
<h2>ðŸ•Œ Prayer Time</h2>
<p id="fullDate"></p>
<p id="localTime"></p>
</header>

<!-- Home -->
<div id="homePage">

<div class="card">
<h3 id="nextPrayer">Next Prayer</h3>
<p class="big" id="countdown"></p>
</div>

<div class="card">
<h3>Prayer Times</h3>
<p id="fajr"></p>
<p id="dhuhr"></p>
<p id="asr"></p>
<p id="maghrib"></p>
<p id="isha"></p>
</div>

<div class="card">
<h3>ðŸŒ™ Ramadan</h3>
<p id="sehri"></p>
<p id="iftar"></p>
</div>

</div>

<!-- Settings -->
<div id="settingsPage" class="hidden">

<div class="card">
<h3>Language</h3>
<button onclick="setLang('bn')">à¦¬à¦¾à¦‚à¦²à¦¾</button>
<button onclick="setLang('en')">English</button>
</div>

<div class="card">
<h3>Mode</h3>
<button onclick="toggleMode()">Dark / Light</button>
</div>

</div>

<!-- Bottom Nav -->
<div class="bottom-nav">
<button onclick="showPage('home')">Home</button>
<button onclick="showPage('settings')">Settings</button>
</div>

<audio id="adhan" src="https://cdn.islamic.network/audio/adhan/adhan.mp3"></audio>

<script>

/* Page Switch */
function showPage(p){
homePage.classList.add("hidden");
settingsPage.classList.add("hidden");

if(p==="home") homePage.classList.remove("hidden");
if(p==="settings") settingsPage.classList.remove("hidden");
}

/* 12 Hour Format */
function formatTime(time24){
 let [h,m]=time24.split(":");
 let ampm = h >= 12 ? "PM" : "AM";
 h = h % 12 || 12;
 return h + ":" + m + " " + ampm;
}

/* Language */
function setLang(lang){

localStorage.setItem("lang",lang);

if(lang==="bn"){
nextPrayer.innerText="à¦ªà¦°à¦¬à¦°à§à¦¤à§€ à¦¨à¦¾à¦®à¦¾à¦œ";
}
else{
nextPrayer.innerText="Next Prayer";
}

}

/* Mode */
function toggleMode(){
document.body.classList.toggle("light");
}

/* Local Time */
function showLocalTime(){
setInterval(()=>{
let now=new Date();

localTime.innerText="Local Time: "+ now.toLocaleTimeString();

},1000);
}

/* Full Date */
function showFullDate(hijri,enDate){

let bnYear = new Date().getFullYear().toLocaleString("bn-BD");

fullDate.innerText=
"Hijri: "+hijri+
" | English: "+enDate+
" | à¦¬à¦¾à¦‚à¦²à¦¾ à¦¸à¦¾à¦²: "+bnYear;

}

/* Prayer API */
async function loadPrayer(){

let res=await fetch("https://api.aladhan.com/v1/timingsByCity?city=Dhaka&country=Bangladesh&method=1");
let data=await res.json();

let t=data.data.timings;

fajr.innerText="Fajr: "+formatTime(t.Fajr);
dhuhr.innerText="Dhuhr: "+formatTime(t.Dhuhr);
asr.innerText="Asr: "+formatTime(t.Asr);
maghrib.innerText="Maghrib: "+formatTime(t.Maghrib);
isha.innerText="Isha: "+formatTime(t.Isha);

sehri.innerText="Sehri End: "+formatTime(t.Fajr);
iftar.innerText="Iftar: "+formatTime(t.Maghrib);

showFullDate(
data.data.date.hijri.date,
data.data.date.gregorian.date
);

nextPrayerCountdown(t);

}

/* Countdown */
function nextPrayerCountdown(t){

let prayerList=[
{n:"Fajr",t:t.Fajr},
{n:"Dhuhr",t:t.Dhuhr},
{n:"Asr",t:t.Asr},
{n:"Maghrib",t:t.Maghrib},
{n:"Isha",t:t.Isha}
];

setInterval(()=>{

let now=new Date();

for(let p of prayerList){

let time=p.t.split(":");
let pt=new Date();
pt.setHours(time[0],time[1],0);

if(pt>now){

let diff=pt-now;

let h=Math.floor(diff/3600000);
let m=Math.floor(diff/60000)%60;
let s=Math.floor(diff/1000)%60;

countdown.innerText=h+"h "+m+"m "+s+"s";
nextPrayer.innerText="Next Prayer: "+p.n;

if(diff<60000){
adhan.play();
}

break;
}

}

},1000);

}

loadPrayer();
showLocalTime();

/* Load Language */
let savedLang=localStorage.getItem("lang");
if(savedLang) setLang(savedLang);

</script>

</body>
</html>
