<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Bangladesh Prayer Time</title>

<style>

body{
margin:0;
font-family:Segoe UI;
background:#f3f4f6;
}

/* Header */
.header{
text-align:center;
padding:15px;
font-size:22px;
font-weight:bold;
}

/* Remaining Card */
.remaining{
display:flex;
justify-content:space-between;
padding:20px;
}

.remaining-box{
background:#6b8e00;
color:white;
padding:15px 25px;
border-radius:8px;
font-size:30px;
font-weight:bold;
}

.local{
text-align:right;
font-size:20px;
}

/* Prayer Grid */
.prayer-row{
display:flex;
overflow:auto;
padding:10px;
}

.prayer{
min-width:120px;
background:#e5e7eb;
margin:6px;
border-radius:10px;
padding:15px;
text-align:center;
border:2px solid #cbd5e1;
}

.active{
background:#cde4b7;
border:2px solid #6b8e00;
font-weight:bold;
}

.prayer h4{
margin:5px 0;
}

.icon{
font-size:30px;
margin:8px 0;
}

</style>
</head>

<body>

<div class="header">
Bangladesh Prayer times
</div>

<div class="remaining">

<div>
<div id="remaining" class="remaining-box">
--:--:--
</div>
<div id="nextName"></div>
</div>

<div class="local">
<span id="localTime"></span>
<br>
Local Time in Dhaka
</div>

</div>

<div class="prayer-row">

<div class="prayer" id="pFajr">
<h4 id="fajrTime"></h4>
<div class="icon">ğŸŒ…</div>
Fajr
</div>

<div class="prayer" id="pSunrise">
<h4 id="sunriseTime"></h4>
<div class="icon">ğŸŒ„</div>
Sunrise
</div>

<div class="prayer" id="pDhuhr">
<h4 id="dhuhrTime"></h4>
<div class="icon">â˜€ï¸</div>
Dhuhr
</div>

<div class="prayer" id="pAsr">
<h4 id="asrTime"></h4>
<div class="icon">ğŸŒ¤ï¸</div>
Asr
</div>

<div class="prayer" id="pMaghrib">
<h4 id="maghribTime"></h4>
<div class="icon">ğŸŒ‡</div>
Maghrib
</div>

<div class="prayer" id="pIsha">
<h4 id="ishaTime"></h4>
<div class="icon">ğŸŒ™</div>
Isha
</div>

</div>

<script>

/* Format Time */
function formatTime(t){
let [h,m]=t.split(":");
let ampm=h>=12?"PM":"AM";
h=h%12||12;
return h+":"+m+" "+ampm;
}

/* Local Time */
setInterval(()=>{
localTime.innerText=new Date().toLocaleTimeString();
},1000);

/* Load Prayer */
async function loadPrayer(){

let res=await fetch("https://api.aladhan.com/v1/timingsByCity?city=Dhaka&country=Bangladesh&method=1");
let data=await res.json();
let t=data.data.timings;

fajrTime.innerText=formatTime(t.Fajr);
sunriseTime.innerText=formatTime(t.Sunrise);
dhuhrTime.innerText=formatTime(t.Dhuhr);
asrTime.innerText=formatTime(t.Asr);
maghribTime.innerText=formatTime(t.Maghrib);
ishaTime.innerText=formatTime(t.Isha);

nextPrayer(t);
}

/* Next Prayer */
function nextPrayer(t){

let list=[
{name:"Fajr",time:t.Fajr,id:"pFajr"},
{name:"Sunrise",time:t.Sunrise,id:"pSunrise"},
{name:"Dhuhr",time:t.Dhuhr,id:"pDhuhr"},
{name:"Asr",time:t.Asr,id:"pAsr"},
{name:"Maghrib",time:t.Maghrib,id:"pMaghrib"},
{name:"Isha",time:t.Isha,id:"pIsha"}
];

setInterval(()=>{

let now=new Date();

document.querySelectorAll(".prayer").forEach(e=>e.classList.remove("active"));

for(let p of list){

let [h,m]=p.time.split(":");
let pt=new Date();
pt.setHours(h,m,0);

if(pt>now){

let diff=pt-now;

let hh=Math.floor(diff/3600000);
let mm=Math.floor(diff/60000)%60;
let ss=Math.floor(diff/1000)%60;

remaining.innerText=
hh.toString().padStart(2,"0")+":"+
mm.toString().padStart(2,"0")+":"+
ss.toString().padStart(2,"0");

nextName.innerText=p.name+" Remaining time";

document.getElementById(p.id).classList.add("active");

break;
}

}

},1000);

}

loadPrayer();

</script>

</body>
</html>
